<template>
  <div class="docBox">
    <div class="myPatientBox">
      <mt-search >
      </mt-search>
    </div>
    <div class="myPatientContent">
      <!--<div class="sousuo-patient">-->
        <!--<div class="qianyue-patient">-->
          <!--<div class="qianyue">签约患者</div>-->
          <!--<div class="patient-box">-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/bgPerfectInfo.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nan"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/second.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nv"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/second.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nv"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/bgPerfectInfo.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nan"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
          <!--</div>-->
        <!--</div>-->
        <!--<div class="guanzhu-patient">-->
          <!--<div class="qianyue">关注患者</div>-->
          <!--<div class="patient-box">-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/bgPerfectInfo.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nan"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/second.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nv"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/second.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nv"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="patient-list">-->
              <!--<div class="patient-info-box">-->
                <!--<div class="patient-img">-->
                  <!--<img src="../../assets/img/bgPerfectInfo.png"/>-->
                <!--</div>-->
                <!--<div class="patient-info">-->
                  <!--<div class="patient-name-info">-->
                    <!--<span class="patient-name">王倩</span>-->
                    <!--<span class="patient-age">55岁</span>-->
                    <!--<i class="iconfont icon-nan"></i>-->
                    <!--<span class="jibing">乙肝</span>-->
                  <!--</div>-->
                  <!--<div class="visit-time">-->
                    <!--复诊时间：2017-04-12-->
                  <!--</div>-->
                <!--</div>-->
              <!--</div>-->
              <!--<div class="patient-time">-->
                <!--3月23日咨询过我-->
              <!--</div>-->
            <!--</div>-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
      <div class="qianyueBox">
        <div class="qianyue float-box"  @click="qianyue">
          <span ref="qianyuePatient" class="qianyuePatient">签约患者</span>
          (<span ref="qianyueNum" class="qianyueNum">{{managePatientCount}}</span>)
          <span ref="qianyueSpan" class="iconfont fr" :class="{'icon-zhankai2': active, 'icon-shouqi': unActive}">
          </span>
        </div>
        <div class="list-box" :class="{yincang:unShow}">
          <div class="guanzhu float-box" @click="firstLine">
            <span ref="guanzhuPatient">关注患者</span>
            <span ref='guanzhuNum' class="fr">{{attentionPatientCount}}</span>
          </div>
          <div class="line-box"></div>
          <div class="all-patient" @click="secondLine">
            <span ref="quanbuPatient">全部患者</span>
            <span ref="quanbuNum" class="fr">{{allPatientCount}}</span>
          </div>
        </div>
        <div class="zhegaiceng" :class="{yincang:unShow}">
          <div class="list-bottom"></div>
        </div>
        <div class="patient-box">
          <div class="patient-list" v-for="item in message"   @click="goConsult(item.patient_id)">
            <div class="patient-info-box">
              <div class="patient-img">
                <img src="../../assets/img/bgPerfectInfo.png"/>
              </div>
              <div class="patient-info">
                <div class="patient-name-info">
                  <span class="patient-name">{{item.name}}</span>
                  <span class="patient-age">{{item.age}}</span>
                  <i v-if="item.sex == 0" class="iconfont icon-nv"></i>
                  <i v-else class="iconfont icon-nan"></i>
                  <span class="jibing">{{item.diseaseName}}</span>
                </div>
                <div class="visit-time">
                  复诊时间：{{item.revisit}}
                </div>
              </div>
            </div>
            <div class="patient-time">
              {{item.activite}}
            </div>
          </div>
        </div>
      </div>
      <div class="fa-tongzhi" @click="fasongTongzhi">发送<br/> 通知</div>
    </div>
  </div>
</template>
<script>
  import axios from 'axios'
  import netWrokUtils from '../../components/NetWrokUtils'
  export default {
    name: 'myPatient',
    data () {
      return {
        authentication:'9abada2c209a05e2ebd462f7bf68c5cf',
        active: true,
        unActive: false,
        unShow:true,
        value:"1",
        selected:'qianyue-patient',
        message:[],
        allPatientCount:'',
        attentionPatientCount:'',
        managePatientCount:''
      }
    },
    watch: {
//        'authentication'() {
//          axios.get('/api/wx/baochuan_d/patientlist',{params: {
//              authentication: this.authentication
//            }
//          }).then((result) => {
//              console.log(result)
//          })
//
//      }
    },
    created() {
      document.getElementsByTagName('title')[0].innerHTML = '我的患者'
      var params = {
        authentication: this.authentication,
      }
      netWrokUtils.post('/api/wx/baochuan_d/patientlist', params, function (result) {
        this.message = result.data.content.list;
        console.log(result.data.content)
        this.allPatientCount = result.data.content.allPatientCount
        this.attentionPatientCount = result.data.content.attentionPatientCount
        this.managePatientCount = result.data.content.managePatientCount
      }, function (error_result) {
//          Indicator.close();
        Toast(error_result);
      })
    },
    methods: {
      goConsult (id) {
          console.log(id)
        this.$router.push({ path:"/baochuan_d/docConsult/" +id});
      },
      fasongTongzhi() {
        this.$router.push({ path: '/baochuan_d/docFaTongzhi' });
      },
      qianyue() {
        this.unShow = !this.unShow;
        if(this.unActive){
        }
//          this.$refs.qianyueSpan.className = 'iconfont icon-shouqi'
        this.active = !this.active
        this.unActive = !this.unActive
      },
      firstLine() {
        var firstHTML = this.$refs.qianyuePatient.innerHTML;
        this.$refs.qianyuePatient.innerHTML = this.$refs.guanzhuPatient.innerHTML;
        this.$refs.guanzhuPatient.innerHTML = firstHTML
        var firstNum = this.$refs.qianyueNum.innerHTML
        this.$refs.qianyueNum.innerHTML = this.$refs.guanzhuNum.innerHTML;
        this.$refs.guanzhuNum.innerHTML = firstNum;
         this.unShow = !this.unShow;
         this.active = !this.active
         this.unActive = !this.unActive
      },
      secondLine() {
        var secontinnerHTML =  this.$refs.qianyuePatient.innerHTML;
        this.$refs.qianyuePatient.innerHTML = this.$refs.quanbuPatient.innerHTML;
        this.$refs.quanbuPatient.innerHTML = secontinnerHTML;
        var secondNum =  this.$refs.qianyueNum.innerHTML;
        this.$refs.qianyueNum.innerHTML = this.$refs.quanbuNum.innerHTML;
        this.$refs.quanbuNum.innerHTML = secondNum;
        this.unShow = !this.unShow;
        this.active = !this.active
        this.unActive = !this.unActive


      }
    }
  }
</script>

<style lang="scss">
  .docBox{
    background:#fff;
    .myPatientContent{
      position:relative;
      width:100%;
      height: auto;
      .sousuo-patient{
        .qianyue-patient, .guanzhu-patient{
          .qianyue{
            padding:16px;
            background:#f4f4f4;
            color:#232323;
            font-size:16px;
          }
          .patient-box{
            .patient-list:nth-last-child(1){
              -webkit-box-shadow:0 0 25px #fff;
              -moz-box-shadow:0 0 25px #fff;
              box-shadow:0 0 25px #fff;
            }
            .patient-list{
              padding:16px;
              background:#fff;
              -webkit-box-shadow:0 0 25px #E5EBED;
              -moz-box-shadow:0 0 25px #E5EBED;
              box-shadow:0 0 25px #E5EBED;
              margin-bottom:10px;
            .patient-info-box{
              display:flex;
              justify-content: flex-start;
              .patient-img{
                height:60px;
                width:60px;
                padding-right:10px;
                img{
                  height:60px;
                  width:60px;
                  border-radius:50%;
                }
              }
               .patient-info{
                .patient-name-info{
                  padding-bottom:10px;
                  padding-top:5px;
                  .patient-name, .patient-age{
                    font-size:16px;
                    color:#232323;
                   }
                  .jibing{
                    padding:1px 5px;
                    text-align: center;
                    border-radius:10px;
                    background:#bbb;
                    font-size:14px;
                    color:#fff;
                  }
                  .icon-nv{
                    color:#F388C2;
                    font-size:15px;
                  }
                  .icon-nan{
                    color:#49C8F6;
                    font-size:15px;
                  }
                }
                .visit-time{
                  font-size:15px;
                  color:#bbb;
                }
              }
            }
              .patient-time{
                margin-left:66px;
                padding-top:10px;
                margin-top:5px;
                border-top:1px solid #bbb;
                font-size:15px;
                color:#bbb;
              }
            }
          }
        }
      }
      .fa-tongzhi{
        position:fixed;
        right:15px;
        bottom:20px;
        height:46px;
        width:46px;
        color:#fff;
        font-size:16px;
        border-radius:50%;
        background:#5da096;
        text-align: center;
        padding:10px 5px 0px;
      }
      .qianyueBox{
        background:#f4f4f4;
        min-height:100vh;
        .list-box{
          position: absolute;
          top: 44px;
          width:100%;
          height:100px;
          background:#fff;
          opacity:1;
          filter: alpha(opacity=100);
          .guanzhu, .all-patient{
            padding:16px;
            font-size:16px;
            color:#232323;
            .fr{
              border:1px solid #fff;
              border-radius:10px;
              padding:2px 10px;
              text-align: center;
              background:#61C6B4;
              color:#fff;
              font-size:14px;
            }
          }
          .line-box{
            height:1px;
            background:#f4f4f4;
            margin:auto 16px;
          }
        }
        .zhegaiceng{
          position:absolute;
          min-height:100vh;
          width:100%;
          top:144px;
          background:#000;
          opacity:0.5;
          filter: alpha(opacity=50);
        }
        .yincang{
          display:none;
        }
        .qianyue {
          height: 44px;
          line-height: 44px;
          padding-left: 16px;
          background:#f4f4f4;
          border-top:1px solid #f4f4f4;
          -webkit-box-shadow:0 5px 5px #D2E6E3;
          -moz-box-shadow:0 5px 5px #D2E6E3;
          box-shadow:0 5px 5px #D2E6E3;
          margin-bottom:10px;
          font-size:16px;
          color:#232323;
          .iconfont{
            font-size:16px;
            padding-right:16px;
            color:#bbb;
          }
        }
        .patient-box{
        /*background:#f4f4f4;*/
          .patient-list:nth-last-child(1){
            -webkit-box-shadow:0 0 25px #fff;
            -moz-box-shadow:0 0 25px #fff;
            box-shadow:0 0 25px #fff;
          }
          .patient-list{
            padding:16px;
            background:#fff;
            -webkit-box-shadow:0 0 25px #E5EBED;
            -moz-box-shadow:0 0 25px #E5EBED;
            box-shadow:0 0 25px #E5EBED;
            margin-bottom:10px;
            .patient-info-box{
              display:flex;
              justify-content: flex-start;
              .patient-img{
                height:60px;
                width:60px;
                padding-right:10px;
                img{
                  height:60px;
                  width:60px;
                  border-radius:50%;
                }
              }
              .patient-info{
                .patient-name-info{
                  padding-bottom:10px;
                  padding-top:5px;
                  .patient-name, .patient-age{
                    font-size:16px;
                    color:#232323;
                  }
                  .jibing{
                    padding:1px 5px;
                    text-align: center;
                    border-radius:10px;
                    background:#bbb;
                    font-size:14px;
                    color:#fff;
                  }
                  .icon-nv{
                    color:#F388C2;
                    font-size:15px;
                  }
                   .icon-nan{
                     color:#49C8F6;
                     font-size:15px;
                   }
                }
                .visit-time{
                  font-size:15px;
                  color:#bbb;
                }
              }
            }
            .patient-time{
             margin-left:66px;
              padding-top:10px;
              margin-top:5px;
              border-top:1px solid #bbb;
              font-size:15px;
              color:#bbb;
            }
          }
        }
      }
    }
    .myPatientBox {
      height: 60px;
      .mint-searchbar{
        background:#fff !important;
        .mint-searchbar-inner{
          background:#ECECEC !important;
          .mintui-search{
            text-align: center;
          }
          .mint-searchbar-cancel{
            color:#bbb!important;
          }
          .mint-searchbar-core{
            background:#ECECEC;
          }
          input::-webkit-input-placeholder{
            color:#D2D2D2;
            text-align: center;
          }
          input{
            color:#232323;
          }
        }
      }
    }
  }

</style>
